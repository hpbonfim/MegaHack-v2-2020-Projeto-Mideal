(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{PU5u:function(t,e,r){"use strict";r.r(e),r.d(e,"SignupModule",(function(){return Q}));var o=r("kmnG"),n=r("qFsG"),a=r("bTqV"),s=r("tyNb"),i=r("mrSG"),c=r("3Pt+"),b=r("PSD3"),m=r.n(b),u=r("cYo0"),l=r("MvzY"),f=r("fXoL"),d=r("FXLl"),p=r("tk/3");let g=(()=>{class t extends d.a{constructor(t){super(t),this.API_URL="user/register"}}return t.\u0275fac=function(e){return new(e||t)(f.Vb(p.b))},t.\u0275prov=f.Ib({token:t,factory:t.\u0275fac}),t})();var h=r("4jKo"),v=r("mJcT"),w=r("XiUz");const R=[{path:"",component:(()=>{class t{constructor(t,e,r,o){this.router=t,this.userRegistersService=e,this.userDataService=r,this.userConfirmationSmsService=o,this.handleSubmit=()=>Object(i.a)(this,void 0,void 0,(function*(){if(Object(u.a)(this.form),!this.formValidation()||this.form.invalid)return;const{result:t}=yield this.userRegistersService.post(this.formatObject()).toPromise();t&&m.a.fire("Sucesso","Cadastro realizado!","success").then(()=>{this.sendSmsAndRedirect(t)})})),this.getErrorMessage=t=>Object(l.a)(this.form.get(t)),this.goBack=()=>window.history.back()}ngOnInit(){this.createForm()}createForm(){this.form=new c.d({userName:new c.b("usr"),fullName:new c.b("",c.n.required),countryCode:new c.b("55"),phone:new c.b("",c.n.required),password:new c.b("",c.n.required),email:new c.b("",[c.n.required,c.n.email]),confirmPassword:new c.b("",c.n.required)})}formatObject(){const{phone:t}=this.form.value,e=t.substring(2),r=t.substring(0,2);return Object.assign(Object.assign({},this.form.value),{phoneNumber:e,stateCode:r})}formValidation(){const{password:t,confirmPassword:e}=this.form.value;if(t===e)return!0;this.form.get("confirmPassword").setErrors({confirmPassword:!0})}sendSmsAndRedirect(t){return Object(i.a)(this,void 0,void 0,(function*(){const{_id:e,stateCode:r,phoneNumber:o}=t,n=r+o;yield this.userConfirmationSmsService.post({_id:e}).toPromise(),this.userDataService.setPhoneNumber(n),this.userDataService.setUserData(t),this.router.navigate(["/user-confirmation"])}))}}return t.\u0275fac=function(e){return new(e||t)(f.Mb(s.b),f.Mb(g),f.Mb(h.a),f.Mb(v.a))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-signup"]],decls:40,vars:6,consts:[[1,"content"],["fxFlex","100","fxLayout","column","fxLayoutAlign","start center",1,"align-center"],["fxLayout","column","fxLayoutAlign","center center",1,"box"],["alt","Logo","src","../../assets/images/mideal-logo-black.png"],[1,"w-100",3,"formGroup"],["fxLayout","column"],["appearance","outline","color","primary"],["formControlName","fullName","type","text","ngDefaultControl","","matInput",""],["formControlName","phone","type","text","ngDefaultControl","","matInput","","mask","(00) 00009-0000","placeholder","(00) 00000-0000","autocomplete","off"],["formControlName","email","type","text","ngDefaultControl","","matInput",""],["formControlName","password","type","password","ngDefaultControl","","matInput",""],["formControlName","confirmPassword","type","password","ngDefaultControl","","matInput",""],["mat-raised-button","","color","accent",1,"btn-accent",3,"click"],[1,"text-muted",3,"click"]],template:function(t,e){1&t&&(f.Rb(0,"div",0),f.Rb(1,"div",1),f.Rb(2,"div",2),f.Nb(3,"img",3),f.Rb(4,"form",4),f.Rb(5,"div",5),f.Rb(6,"mat-form-field",6),f.Rb(7,"mat-label"),f.uc(8,"Nome completo"),f.Qb(),f.Nb(9,"input",7),f.Rb(10,"mat-error"),f.uc(11),f.Qb(),f.Qb(),f.Rb(12,"mat-form-field",6),f.Rb(13,"mat-label"),f.uc(14,"Telefone"),f.Qb(),f.Nb(15,"input",8),f.Rb(16,"mat-error"),f.uc(17),f.Qb(),f.Qb(),f.Rb(18,"mat-form-field",6),f.Rb(19,"mat-label"),f.uc(20,"E-mail"),f.Qb(),f.Nb(21,"input",9),f.Rb(22,"mat-error"),f.uc(23),f.Qb(),f.Qb(),f.Rb(24,"mat-form-field",6),f.Rb(25,"mat-label"),f.uc(26,"Senha"),f.Qb(),f.Nb(27,"input",10),f.Rb(28,"mat-error"),f.uc(29),f.Qb(),f.Qb(),f.Rb(30,"mat-form-field",6),f.Rb(31,"mat-label"),f.uc(32,"Confirmar senha"),f.Qb(),f.Nb(33,"input",11),f.Rb(34,"mat-error"),f.uc(35),f.Qb(),f.Qb(),f.Qb(),f.Qb(),f.Rb(36,"button",12),f.Zb("click",(function(){return e.handleSubmit()})),f.uc(37,"Salvar"),f.Qb(),f.Rb(38,"a",13),f.Zb("click",(function(){return e.goBack()})),f.uc(39,"Voltar"),f.Qb(),f.Qb(),f.Qb(),f.Qb()),2&t&&(f.Bb(4),f.gc("formGroup",e.form),f.Bb(7),f.vc(e.getErrorMessage("fullName")),f.Bb(6),f.vc(e.getErrorMessage("phone")),f.Bb(6),f.vc(e.getErrorMessage("email")),f.Bb(6),f.vc(e.getErrorMessage("password")),f.Bb(6),f.vc(e.getErrorMessage("confirmPassword")))},directives:[w.a,w.c,w.b,c.o,c.k,c.e,o.b,o.e,c.a,n.a,c.j,c.c,o.a,a.a],styles:["img[_ngcontent-%COMP%]{max-width:150px}form[_ngcontent-%COMP%]{margin-top:40px}button[_ngcontent-%COMP%]{margin-top:20px}.box[_ngcontent-%COMP%]{min-width:300px;padding-top:100px}.content[_ngcontent-%COMP%]{height:100vh}a[_ngcontent-%COMP%]{margin-top:10px}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=f.Kb({type:t}),t.\u0275inj=f.Jb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(R)],s.e]}),t})();var y=r("PCNd");let Q=(()=>{class t{}return t.\u0275mod=f.Kb({type:t}),t.\u0275inj=f.Jb({factory:function(e){return new(e||t)},providers:[g,h.a,v.a],imports:[[C,y.a,o.d,n.b,a.b]]}),t})()}}]);