function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){return function(){var e,r=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{PU5u:function(t,e,r){"use strict";r.r(e),r.d(e,"SignupModule",(function(){return N}));var n,o,a,i,s=r("ofXK"),c=r("3Pt+"),u=r("YUcS"),f=r("kmnG"),l=r("qFsG"),b=r("bTqV"),m=r("tk/3"),p=r("tmjD"),d=r("tyNb"),h=r("mrSG"),g=r("PSD3"),y=r.n(g),v=r("cYo0"),w=r("MvzY"),_=r("fXoL"),R=r("FXLl"),C=((n=function(t){_inherits(r,t);var e=_createSuper(r);function r(t){var n;return _classCallCheck(this,r),(n=e.call(this,t)).API_URL="user/register",n}return r}(R.a)).\u0275fac=function(t){return new(t||n)(_.Vb(m.b))},n.\u0275prov=_.Ib({token:n,factory:n.\u0275fac}),n),P=r("f42b"),O=r("mJcT"),k=r("XiUz"),x=[{path:"",component:(o=function(){function t(e,r,n,o){var a=this;_classCallCheck(this,t),this.router=e,this.userRegistersService=r,this.userDataService=n,this.userConfirmationSmsService=o,this.handleSubmit=function(){return Object(h.a)(a,void 0,void 0,regeneratorRuntime.mark((function t(){var e,r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(v.a)(this.form),this.formValidation()&&!this.form.invalid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.userRegistersService.post(this.formatObject()).toPromise();case 4:e=t.sent,(r=e.result)&&y.a.fire("Sucesso","Cadastro realizado!","success").then((function(){n.sendSmsAndRedirect(r)}));case 7:case"end":return t.stop()}}),t,this)})))},this.getErrorMessage=function(t){return Object(w.a)(a.form.get(t))},this.goBack=function(){return window.history.back()}}return _createClass(t,[{key:"ngOnInit",value:function(){this.createForm()}},{key:"createForm",value:function(){this.form=new c.d({userName:new c.b("usr"),fullName:new c.b("",c.n.required),countryCode:new c.b("55"),phone:new c.b("",c.n.required),password:new c.b("",c.n.required),email:new c.b("",[c.n.required,c.n.email]),confirmPassword:new c.b("",c.n.required)})}},{key:"formatObject",value:function(){var t=this.form.value.phone,e=t.substring(2),r=t.substring(0,2);return Object.assign(Object.assign({},this.form.value),{phoneNumber:e,stateCode:r})}},{key:"formValidation",value:function(){var t=this.form.value;if(t.password===t.confirmPassword)return!0;this.form.get("confirmPassword").setErrors({confirmPassword:!0})}},{key:"sendSmsAndRedirect",value:function(t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,n=t.stateCode,o=t.phoneNumber,a=n+o,e.next=3,this.userConfirmationSmsService.post({_id:r}).toPromise();case 3:this.userDataService.setPhoneNumber(a),this.userDataService.setUserData(t),this.router.navigate(["/user-confirmation"]);case 6:case"end":return e.stop()}}),e,this)})))}}]),t}(),o.\u0275fac=function(t){return new(t||o)(_.Mb(d.b),_.Mb(C),_.Mb(P.a),_.Mb(O.a))},o.\u0275cmp=_.Gb({type:o,selectors:[["app-signup"]],decls:40,vars:6,consts:[[1,"content"],["fxFlex","100","fxLayout","column","fxLayoutAlign","start center",1,"align-center"],["fxLayout","column","fxLayoutAlign","center center",1,"box"],["alt","Logo","src","../../assets/images/mideal-logo-black.png"],[1,"w-100",3,"formGroup"],["fxLayout","column"],["appearance","outline","color","primary"],["formControlName","fullName","type","text","ngDefaultControl","","matInput",""],["formControlName","phone","type","text","ngDefaultControl","","matInput","","mask","(00) 00009-0000","placeholder","(00) 00000-0000","autocomplete","off"],["formControlName","email","type","text","ngDefaultControl","","matInput",""],["formControlName","password","type","password","ngDefaultControl","","matInput",""],["formControlName","confirmPassword","type","password","ngDefaultControl","","matInput",""],["mat-raised-button","","color","accent",1,"btn-accent",3,"click"],[1,"text-muted",3,"click"]],template:function(t,e){1&t&&(_.Rb(0,"div",0),_.Rb(1,"div",1),_.Rb(2,"div",2),_.Nb(3,"img",3),_.Rb(4,"form",4),_.Rb(5,"div",5),_.Rb(6,"mat-form-field",6),_.Rb(7,"mat-label"),_.rc(8,"Nome completo"),_.Qb(),_.Nb(9,"input",7),_.Rb(10,"mat-error"),_.rc(11),_.Qb(),_.Qb(),_.Rb(12,"mat-form-field",6),_.Rb(13,"mat-label"),_.rc(14,"Telefone"),_.Qb(),_.Nb(15,"input",8),_.Rb(16,"mat-error"),_.rc(17),_.Qb(),_.Qb(),_.Rb(18,"mat-form-field",6),_.Rb(19,"mat-label"),_.rc(20,"E-mail"),_.Qb(),_.Nb(21,"input",9),_.Rb(22,"mat-error"),_.rc(23),_.Qb(),_.Qb(),_.Rb(24,"mat-form-field",6),_.Rb(25,"mat-label"),_.rc(26,"Senha"),_.Qb(),_.Nb(27,"input",10),_.Rb(28,"mat-error"),_.rc(29),_.Qb(),_.Qb(),_.Rb(30,"mat-form-field",6),_.Rb(31,"mat-label"),_.rc(32,"Confirmar senha"),_.Qb(),_.Nb(33,"input",11),_.Rb(34,"mat-error"),_.rc(35),_.Qb(),_.Qb(),_.Qb(),_.Qb(),_.Rb(36,"button",12),_.Zb("click",(function(){return e.handleSubmit()})),_.rc(37,"Salvar"),_.Qb(),_.Rb(38,"a",13),_.Zb("click",(function(){return e.goBack()})),_.rc(39,"Voltar"),_.Qb(),_.Qb(),_.Qb(),_.Qb()),2&t&&(_.Bb(4),_.gc("formGroup",e.form),_.Bb(7),_.sc(e.getErrorMessage("fullName")),_.Bb(6),_.sc(e.getErrorMessage("phone")),_.Bb(6),_.sc(e.getErrorMessage("email")),_.Bb(6),_.sc(e.getErrorMessage("password")),_.Bb(6),_.sc(e.getErrorMessage("confirmPassword")))},directives:[k.a,k.c,k.b,c.o,c.k,c.e,f.b,f.e,c.a,l.a,c.j,c.c,f.a,p.a,b.a],styles:["img[_ngcontent-%COMP%]{max-width:150px}form[_ngcontent-%COMP%]{margin-top:40px}button[_ngcontent-%COMP%]{margin-top:20px}.box[_ngcontent-%COMP%]{min-width:300px;padding-top:100px}.content[_ngcontent-%COMP%]{height:100vh}a[_ngcontent-%COMP%]{margin-top:10px}"]}),o)}],S=((i=function t(){_classCallCheck(this,t)}).\u0275mod=_.Kb({type:i}),i.\u0275inj=_.Jb({factory:function(t){return new(t||i)},imports:[[d.e.forChild(x)],d.e]}),i),N=((a=function t(){_classCallCheck(this,t)}).\u0275mod=_.Kb({type:a}),a.\u0275inj=_.Jb({factory:function(t){return new(t||a)},providers:[C,P.a,O.a],imports:[[m.c,s.b,S,c.f,c.m,u.a,p.c.forRoot(),f.d,l.b,b.b]]}),a)}}]);