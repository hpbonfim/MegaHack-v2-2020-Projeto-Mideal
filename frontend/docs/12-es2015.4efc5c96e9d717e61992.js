(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{PU5u:function(t,e,r){"use strict";r.r(e),r.d(e,"SignupModule",(function(){return x}));var o=r("kmnG"),n=r("qFsG"),a=r("bTqV"),s=r("tmjD"),i=r("tyNb"),c=r("mrSG"),m=r("3Pt+"),b=r("PSD3"),u=r.n(b),l=r("cYo0"),f=r("MvzY"),d=r("fXoL"),p=r("FXLl"),g=r("tk/3");let h=(()=>{class t extends p.a{constructor(t){super(t),this.API_URL="user/register"}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(g.b))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac}),t})();var v=r("4jKo"),S=r("mJcT"),w=r("XiUz");const R=[{path:"",component:(()=>{class t{constructor(t,e,r,o){this.router=t,this.userRegistersService=e,this.userDataService=r,this.userConfirmationSmsService=o,this.handleSubmit=()=>Object(c.a)(this,void 0,void 0,(function*(){if(Object(l.a)(this.form),!this.formValidation()||this.form.invalid)return;const{result:t}=yield this.userRegistersService.post(this.formatObject()).toPromise();t&&u.a.fire("Sucesso","Cadastro realizado!","success").then(()=>{this.sendSmsAndRedirect(t)})})),this.getErrorMessage=t=>Object(f.a)(this.form.get(t)),this.goBack=()=>window.history.back()}ngOnInit(){this.createForm()}createForm(){this.form=new m.d({userName:new m.b("usr"),fullName:new m.b("",m.n.required),countryCode:new m.b("55"),phone:new m.b("",m.n.required),password:new m.b("",m.n.required),email:new m.b("",[m.n.required,m.n.email]),confirmPassword:new m.b("",m.n.required)})}formatObject(){const{phone:t}=this.form.value,e=t.substring(2),r=t.substring(0,2);return Object.assign(Object.assign({},this.form.value),{phoneNumber:e,stateCode:r})}formValidation(){const{password:t,confirmPassword:e}=this.form.value;if(t===e)return!0;this.form.get("confirmPassword").setErrors({confirmPassword:!0})}sendSmsAndRedirect(t){return Object(c.a)(this,void 0,void 0,(function*(){const{_id:e,stateCode:r,phoneNumber:o}=t,n=r+o;yield this.userConfirmationSmsService.post({_id:e}).toPromise(),this.userDataService.setPhoneNumber(n),this.userDataService.setUserData(t),this.router.navigate(["/user-confirmation"])}))}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(i.b),d.Nb(h),d.Nb(v.a),d.Nb(S.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-signup"]],decls:40,vars:6,consts:[[1,"content"],["fxFlex","100","fxLayout","column","fxLayoutAlign","start center",1,"align-center"],["fxLayout","column","fxLayoutAlign","center center",1,"box"],["alt","Logo","src","../../assets/images/mideal-logo-black.png"],[1,"w-100",3,"formGroup"],["fxLayout","column"],["appearance","outline","color","primary"],["formControlName","fullName","type","text","ngDefaultControl","","matInput",""],["formControlName","phone","type","text","ngDefaultControl","","matInput","","mask","(00) 00009-0000","placeholder","(00) 00000-0000","autocomplete","off"],["formControlName","email","type","text","ngDefaultControl","","matInput",""],["formControlName","password","type","password","ngDefaultControl","","matInput",""],["formControlName","confirmPassword","type","password","ngDefaultControl","","matInput",""],["mat-raised-button","","color","accent",1,"btn-accent",3,"click"],[1,"text-muted",3,"click"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Ob(3,"img",3),d.Sb(4,"form",4),d.Sb(5,"div",5),d.Sb(6,"mat-form-field",6),d.Sb(7,"mat-label"),d.vc(8,"Nome completo"),d.Rb(),d.Ob(9,"input",7),d.Sb(10,"mat-error"),d.vc(11),d.Rb(),d.Rb(),d.Sb(12,"mat-form-field",6),d.Sb(13,"mat-label"),d.vc(14,"Telefone"),d.Rb(),d.Ob(15,"input",8),d.Sb(16,"mat-error"),d.vc(17),d.Rb(),d.Rb(),d.Sb(18,"mat-form-field",6),d.Sb(19,"mat-label"),d.vc(20,"E-mail"),d.Rb(),d.Ob(21,"input",9),d.Sb(22,"mat-error"),d.vc(23),d.Rb(),d.Rb(),d.Sb(24,"mat-form-field",6),d.Sb(25,"mat-label"),d.vc(26,"Senha"),d.Rb(),d.Ob(27,"input",10),d.Sb(28,"mat-error"),d.vc(29),d.Rb(),d.Rb(),d.Sb(30,"mat-form-field",6),d.Sb(31,"mat-label"),d.vc(32,"Confirmar senha"),d.Rb(),d.Ob(33,"input",11),d.Sb(34,"mat-error"),d.vc(35),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(36,"button",12),d.ac("click",(function(){return e.handleSubmit()})),d.vc(37,"Salvar"),d.Rb(),d.Sb(38,"a",13),d.ac("click",(function(){return e.goBack()})),d.vc(39,"Voltar"),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.Bb(4),d.hc("formGroup",e.form),d.Bb(7),d.wc(e.getErrorMessage("fullName")),d.Bb(6),d.wc(e.getErrorMessage("phone")),d.Bb(6),d.wc(e.getErrorMessage("email")),d.Bb(6),d.wc(e.getErrorMessage("password")),d.Bb(6),d.wc(e.getErrorMessage("confirmPassword")))},directives:[w.a,w.c,w.b,m.o,m.k,m.e,o.b,o.e,m.a,n.a,m.j,m.c,o.a,s.a,a.a],styles:["img[_ngcontent-%COMP%]{max-width:150px}form[_ngcontent-%COMP%]{margin-top:40px}button[_ngcontent-%COMP%]{margin-top:20px}.box[_ngcontent-%COMP%]{min-width:300px;padding-top:100px}.content[_ngcontent-%COMP%]{height:100vh}a[_ngcontent-%COMP%]{margin-top:10px}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(R)],i.e]}),t})();var y=r("PCNd");let x=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},providers:[h,v.a,S.a],imports:[[C,y.a,s.c,o.d,n.b,a.b]]}),t})()}}]);